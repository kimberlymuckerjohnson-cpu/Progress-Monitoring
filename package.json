# Emergent.sh Master Input – Special Ed Goal & Assessment Web App

---

## 0. Meta

- **Project Name:** Special Ed Goal & Assessment Tracker
- **Version:** v1.0 (MVP UI layout)
- **Platform:** Web app (desktop-first, mobile-friendly)
- **Primary User:** Special education teachers
- **LLM Use:** Item generation + fluency passage generation only
  - **LLM temperature:** ≤ 0.3
  - **LLM max_tokens:** ≤ 512 per generation
  - **LLM top_p:** 0.9

---

## 1. App Overview

A minimal web app for special education teachers to:

- Manage students and their IEP-style goals.
- Run and record:
  - General goal-based assessments (per goal, itemized scoring).
  - Reading fluency assessments (WCPM, accuracy).
- View progress reports at:
  - Student level.
  - Class/roster level.

**Core screens (post-login nav):**

- Students
- Goals
- Assessments
- Reports
- Logout (top-right action)
- Login is a separate unauthenticated screen.

---

## 2. Roles & Auth

### 2.1 Roles

- **Teacher (only role for MVP)**
  - Create / edit / delete own students.
  - Create / edit / delete goals for their students.
  - Run assessments and fluency assessments for their students.
  - View reports for their own students.

_No admin, parent, or student-facing roles in MVP._

### 2.2 Authentication

- **Method:** Email + password.
- **Flows:**
  - Login screen
    - Inputs: email, password.
    - On success → redirect to `/students`.
    - On failure → inline error message.
  - Logout
    - Menu item in top nav (right side).
    - Clears session and redirects to Login.

- **Forgot password:** Link is present but **non-functional in MVP** (no backend flow, no email).

---

## 3. Screens & Flows

### 3.1 Login Screen

**Route:** `/login`  
**Purpose:** Authenticate teacher and route to main app.

**Layout:**

- Centered card on neutral background.
- Card contents:
  - App name: “Goal & Fluency Tracker”
  - Email field
  - Password field
  - Primary button: “Log In”
  - Text link below: “Forgot password?” (non-functional hint/state only)
- Minimal footer text: “For staff use only.”

**Behavior:**

- Submit via button or Enter key.
- States:
  - Loading (disable button, show small spinner in button).
  - Error (wrong credentials → show red text: “Incorrect email or password.”)
- On success:
  - Redirect to `/students`.

---

### 3.2 Students Screen

**Route:** `/students`  
**Purpose:** Manage students for the logged-in teacher.

**Layout:**

- Header bar inside page:
  - Title: “Students”
  - Right-aligned primary button: “Add Student”
- Main content:
  - Table (desktop) / stacked list (mobile) with columns:
    - Student Name (First + Last)
    - Grade
    - # of Goals
    - Last Assessment Date
    - Actions (View · Edit · Delete)

**Row Actions / Interactions:**

- Clicking Student Name or “View”:
  - Opens **Student Detail** view.
- “Edit”:
  - Opens Edit Student modal.
- “Delete”:
  - Confirmation dialog:
    - “Delete this student and all associated goals and assessments? This cannot be undone.”
    - Buttons: “Cancel” (secondary), “Delete” (danger).

#### 3.2.1 Add / Edit Student Modal

- Trigger: “Add Student” / “Edit” from list.
- Fields:
  - First Name (text, required)
  - Last Name (text, required)
  - Grade Level (dropdown or short text, required)
- Buttons:
  - Primary: “Save Student”
  - Secondary: “Cancel”
- On success:
  - Close modal.
  - Refresh students list.

#### 3.2.2 Student Detail View

**Route pattern:** `/students/:studentId` or side panel over list. MVP assumption: **full page**.

**Layout:**

- Top section:
  - Student Name
  - Grade Level
  - Small “Back to Students” link.
- Section: Quick Actions
  - Buttons:
    - “New Assessment”
    - “New Fluency Assessment”
  - Clicking:
    - Navigates to `/assessments?studentId=...&type=general` or `type=fluency`.

- Section: Goals for this student
  - Table/list with:
    - Goal Area
    - Short Description (truncated)
    - Goal Grade Level
    - Mastery Criteria (short)
    - Link: “Open in Goals”
  - “Add Goal” button that opens Add Goal pre-filtered to this student.

Behavior:

- Clicking “Open in Goals” or “View all goals”:
  - Navigates to `/goals?studentId=...` (Goals screen auto-filters).

---

### 3.3 Goals Screen

**Route:** `/goals`  
**Purpose:** Manage goals per student.

**Layout:**

- Filters row at top:
  - Student dropdown (All students + specific students).
  - Goal Area dropdown:
    - Reading
    - Math
    - Writing
    - Behavior
    - Other
- Header row:
  - Title: “Goals”
  - Primary button: “Add Goal”
- Goals table:
  - Columns:
    - Student Name
    - Goal Area
    - Description (truncated to 1–2 lines)
    - Goal Grade Level
    - Mastery Criteria (short)
    - Actions: Edit · Delete

**Behavior:**

- If coming from Student Detail, URL has `?studentId=` → Student filter pre-selected.
- Changing filters refetches or refilters goals.

#### 3.3.1 Add / Edit Goal Modal

- Fields:
  - Student (dropdown of teacher’s students, required)
  - Area (dropdown: Reading, Math, Writing, Behavior, Other, required)
  - Description (multi-line, required)
  - Goal Grade Level (text or dropdown, required)
  - Mastery Criteria (text, required)
- Buttons:
  - Primary: “Save Goal”
  - Secondary: “Cancel”
- Behavior:
  - On Save:
    - Validate required fields.
    - Close modal.
    - Refresh goals list.
  - Edit uses same modal with values pre-filled.

- Delete goal:
  - Confirmation: “Delete this goal and its assessment history? This cannot be undone.”

---

### 3.4 Assessments Screen

**Route:** `/assessments`  
**Purpose:** Run and record:
- General goal-based assessments.
- Reading fluency assessments.

**Layout:**

- Top tabs / toggle:
  - Tab 1: “General Assessment”
  - Tab 2: “Fluency Assessment”

---

#### 3.4.1 General Assessment Tab

**Route:** `/assessments?tab=general`  

**Step 1 – Select Context**

- Student dropdown (required).
- Multiselect of that student’s **active goals** (required at least 1).
- Primary button: “Generate Items”.

**Behavior:**

- When student selected:
  - Load that student’s active goals into multiselect.
- “Generate Items”:
  - Calls AI / backend to generate assessment items per goal.
  - Disable button while loading.
  - Error message if generation fails:
    - “Couldn’t generate items. Please try again.”

**Step 2 – Generated Items Section**

- Appears **only after** items are generated.
- Layout:
  - Grouped by **Goal**:
    - Goal Header: Goal Area + short Description.
  - For each **Item**:
    - Prompt text (question/task).
    - Correct Answer (small, muted text).
    - Scoring input:
      - Dropdown: [Correct, Incorrect] OR checkbox “Correct”.
        - MVP assumption: dropdown with values:
          - “Correct”
          - “Incorrect”
    - Optional note field (single-line, can be skipped in MVP if needed; assume **not included in MVP** to simplify).

**Step 3 – Save Results**

- At bottom of page:
  - Assessment Date (date picker, default = today).
  - Summary (auto-calculated, read-only):
    - Total items (all goals combined).
    - Items correct per goal (Goal label + “X / Y”).
  - Primary button: “Save Assessment”.

**Behavior:**

- When scoring values change:
  - Update summary counts in real time.
- On Save:
  - Validate:
    - Student selected.
    - At least one goal selected.
    - At least one item exists.
  - Show success toast: “Assessment saved.”
  - Optionally clear items or keep them until user navigates away (MVP: keep until user switches tab or leaves screen).

---

#### 3.4.2 Fluency Assessment Tab

**Route:** `/assessments?tab=fluency`  

**Step 1 – Setup**

- Student dropdown (required).
- Optional: Goal dropdown (reading/fluency goals for that student).
- Grade Level field:
  - Pre-filled from student.
  - Editable (text/dropdown).
- Optional Topic dropdown:
  - Animals
  - Sports
  - Nature
  - Community
  - (Plus “No preference” option.)
- Primary button: “Generate Passage”.

**Behavior:**

- “Generate Passage”:
  - Calls AI to generate a 100–200 word passage.
  - Show loading spinner on button.
  - Error message if generation fails:
    - “Couldn’t generate a passage. Please try again.”

**Step 2 – Passage Display**

- When passage is available:
  - Show in a read-only text box with:
    - Scroll if long.
  - Secondary button: “Copy Passage”.
    - Copies passage text to clipboard.
  - Small helper text: “Use this for oral reading.”

**Step 3 – Record Fluency Data**

Fields:

- Assessment Date (date picker, default = today).
- Total Words Attempted (number, required).
- Errors (number, required).
- Auto-calculated, read-only fields:
  - WCPM (Words Correct Per Minute)
    - Formula (assumption):
      - WCPM = (Total Words Attempted − Errors)
  - Accuracy %
    - Formula:
      - Accuracy % = ((Total Words Attempted − Errors) / Total Words Attempted) × 100
- Primary button: “Save Fluency Assessment”.

**Behavior:**

- As user types in Total Words Attempted or Errors:
  - Recalculate WCPM and Accuracy % in real time.
- Validations:
  - Total Words Attempted ≥ 1.
  - Errors ≥ 0.
  - Errors ≤ Total Words Attempted.
- On Save:
  - Success toast: “Fluency assessment saved.”

---

### 3.5 Reports Screen

**Route:** `/reports`  
**Purpose:** Provide student-level and class-level progress views.

**Layout:**

- Top toggle / tabs:
  - “Student Report”
  - “Class Overview”

---

#### 3.5.1 Student Report Tab

**Route:** `/reports?tab=student`  

**Controls at Top:**

- Student dropdown (required).
- Optional Goal dropdown (limited to that student’s goals, default “All goals”).

**Layout:**

- Section: Student Info
  - Name
  - Grade
- Section: Goals Summary (table)
  - Columns:
    - Goal Description
    - Area
    - Latest Percent Correct (from general assessments, or “No Data”)
    - Trend (Improving / Flat / Declining)
    - Status:
      - On Track
      - Needs Support
      - No Recent Data

- Section: Detailed Goal History  
  _Visible when a single goal is selected._
  - Table:
    - Date
    - Percent Correct
    - Items Correct / Total
  - Optional simple mini chart: line of Percent Correct over time.
    - If chart is too complex for MVP, we can omit and keep just the table.

- Section: Fluency Summary
  - Table:
    - Date
    - WCPM
    - Accuracy %
    - Trend label (Improving / Flat / Declining)

**Export Option:**

- Single simple option:
  - Button: “Copy Report Text”
    - Copies a text-only narrative summary to clipboard (e.g., “Summary for [Student Name]...”).
    - No PDF/CSV in MVP.

---

#### 3.5.2 Class Overview Tab

**Route:** `/reports?tab=class`  

**Controls at Top:**

- Filter by Goal Area (dropdown: All, Reading, Math, Writing, Behavior, Other).
- Filter by Grade (dropdown: All + present grades).

**Layout:**

- Table with:
  - Student Name
  - Goal Area
  - Short Goal Description
  - Latest Percent Correct (or “No Data”)
  - Latest Fluency WCPM (if any, else “—”)
  - Status (On Track / Needs Support / No Recent Data)

**Behavior:**

- Clicking Student Name:
  - Navigates to `/reports?tab=student&studentId=...`.

---

### 3.6 Navigation

**Persistent Navigation Bar (post-login):**

- Left:
  - Logo / App Name: “Goal & Fluency Tracker”
- Center/Left menu items (clickable):
  - Students
  - Goals
  - Assessments
  - Reports
- Right:
  - Logged-in teacher email (text).
  - “Logout” button/link.

**Mobile behavior:**

- Collapse nav into hamburger menu.
- Keep Logout within menu or as a secondary button.

---

## 4. Data Model (YAML)

> Note: Keep schema minimal and aligned strictly to UI features described.

```yaml
Teacher:
  table: teachers
  fields:
    id: uuid
    email: string
    password_hash: string
    created_at: datetime
    updated_at: datetime

Student:
  table: students
  fields:
    id: uuid
    teacher_id: uuid # FK -> teachers.id
    first_name: string
    last_name: string
    grade_level: string
    created_at: datetime
    updated_at: datetime

Goal:
  table: goals
  fields:
    id: uuid
    student_id: uuid # FK -> students.id
    area: enum # ["reading", "math", "writing", "behavior", "other"]
    description: text
    goal_grade_level: string
    mastery_criteria: text
    active: boolean # for filtering "active goals"
    created_at: datetime
    updated_at: datetime

GeneralAssessment:
  table: general_assessments
  fields:
    id: uuid
    student_id: uuid
    teacher_id: uuid
    assessment_date: date
    created_at: datetime
    updated_at: datetime

GeneralAssessmentItem:
  table: general_assessment_items
  fields:
    id: uuid
    assessment_id: uuid # FK -> general_assessments.id
    goal_id: uuid # FK -> goals.id
    prompt: text
    correct_answer: text
    score: enum # ["correct", "incorrect"]
    # Optional: index/order if needed
    item_index: integer

FluencyAssessment:
  table: fluency_assessments
  fields:
    id: uuid
    student_id: uuid
    teacher_id: uuid
    goal_id: uuid | null # optional link to a reading goal
    assessment_date: date
    grade_level: string
    topic: string | null
    passage_text: text
    total_words_attempted: integer
    errors: integer
    wcpm: integer
    accuracy_percent: float
    created_at: datetime
    updated_at: datetime

# Derived / report-level (computed, not stored or stored as materialized views):
Derived:
  StudentLatestAssessment:
    # For Students table "Last Assessment Date"
    fields:
      student_id: uuid
      last_assessment_date: date | null

  GoalPerformanceSummary:
    # Used for reports: latest % correct, trend, status
    fields:
      goal_id: uuid
      latest_percent_correct: float | null
      trend: enum # ["improving", "flat", "declining", "no_data"]
      status: enum # ["on_track", "needs_support", "no_recent_data"]

  StudentFluencySummary:
    fields:
      student_id: uuid
      last_wcpm: integer | null
      last_accuracy_percent: float | null
      trend_wcpm: enum # ["improving", "flat", "declining", "no_data"]
eports APIs

GET /reports/student:
  description: Student-level report.
  query:
    student_id: string
    goal_id: string | null
  responses:
    200:
      body:
        student:
          id: string
          name: string
          grade_level: string
        goals_summary:
          - goal_id: string
            description: string
            area: string
            latest_percent_correct: float | null
            trend: string
            status: string
        selected_goal_history:
          goal_id: string | null
          assessments:
            - date: string
              percent_correct: float
              items_correct: integer
              items_total: integer
        fluency_summary:
          - date: string
            wcpm: integer
            accuracy_percent: float
            trend: string

GET /reports/class:
  description: Class overview table.
  query:
    area: string | null
    grade_level: string | null
  responses:
    200:
      body:
        rows:
          - student_id: string
            student_name: string
            goal_area: string
            short_goal_description: string
            latest_percent_correct: float | null
            latest_fluency_wcpm: integer | null
            status: string

POST /reports/student/copy-text:
  description: Generate narrative summary text for Student Report.
  body:
    student_id: string
    goal_id: string | null
  responses:
    200:
      body:
        summary_text: string

